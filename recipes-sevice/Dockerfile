FROM node:18
ENV NODE_ENV production
ENV POSTGRES_USER ${POSTGRES_USER}
ENV POSTGRES_PASSWORD ${POSTGRES_PASSWORD}
ENV DB_HOST ${DB_HOST}
ENV RECIPES_PORT ${RECIPES_PORT}
WORKDIR /usr/src/app

COPY package.json ./
RUN npm i --omit=dev

USER node

COPY ./src .

EXPOSE ${RECIPES_PORT}
CMD node web-server.js

